{"is_source_file": true, "format": "JavaScript", "description": "This file exports API utility functions for frontend-backend communication in a React-based dashboard application. It includes functions to resolve API and socket URLs based on environment, perform health checks, and interact with various backend API endpoints for metrics, events, questions, answers, and auth tokens.", "external_files": ["./adminAuth.js", "./auth.js"], "external_methods": ["getAdminToken", "getToken"], "published": ["getApiBaseUrl", "testBackendConnection", "debugEnvironment", "getUsersAnsweredToday", "getEventHeatmap", "getSocketUrl", "authorizedFetch", "getEvents", "createEvent", "getQuestions", "submitAnswer", "getEventTypeDistribution", "getSignupsPerDay", "getActiveUsers", "getTotalEvents", "getRecentActivity"], "classes": [], "methods": [{"name": "getApiBaseUrl()", "description": "Determines the base URL for API requests, considering development and production environments, and environment variables.", "scope": "", "scopeKind": ""}, {"name": "testBackendConnection()", "description": "Performs lightweight GET requests to /health and / to verify backend reachability, returning success status.", "scope": "", "scopeKind": ""}, {"name": "debugEnvironment()", "description": "Logs environment diagnostics in non-production environments to aid debugging of API base and socket URL resolutions.", "scope": "", "scopeKind": ""}, {"name": "getUsersAnsweredToday()", "description": "Fetches user answered questions metrics for today from /api/metrics/users-answered-today.", "scope": "", "scopeKind": ""}, {"name": "getEventHeatmap(range = \"7d\")", "description": "Retrieves heatmap data for events over specified range, defaulting to 7 days.", "scope": "", "scopeKind": ""}, {"name": "getSocketUrl()", "description": "Resolves the URL to connect to socket.io, adjusting for environment (development or production).", "scope": "", "scopeKind": ""}, {"name": "authorizedFetch(url, options = {})", "description": "Performs fetch with automatic attachment of authorization tokens depending on URL path, supporting secure API communication.", "scope": "", "scopeKind": ""}, {"name": "getEvents()", "description": "Fetches list of recent events from backend endpoint.", "scope": "", "scopeKind": ""}, {"name": "createEvent(payload)", "description": "Posts data to create a new event in the backend.", "scope": "", "scopeKind": ""}, {"name": "getQuestions()", "description": "Retrieves multiple-choice questions for users.", "scope": "", "scopeKind": ""}, {"name": "submitAnswer(payload)", "description": "Submits an answer payload to backend API.", "scope": "", "scopeKind": ""}, {"name": "getEventTypeDistribution()", "description": "Fetches distribution data of event types for visualization.", "scope": "", "scopeKind": ""}, {"name": "getSignupsPerDay(range = \"\")", "description": "Retrieves daily signup counts, optionally filtered by range.", "scope": "", "scopeKind": ""}, {"name": "getActiveUsers(window = \"10m\")", "description": "Fetches active user series data over specified window (e.g., 10 minutes).", "scope": "", "scopeKind": ""}, {"name": "getTotalEvents()", "description": "Returns total number of events recorded.", "scope": "", "scopeKind": ""}, {"name": "getRecentActivity()", "description": "Fetches recent user activity logs.", "scope": "", "scopeKind": ""}], "calls": ["getApiBaseUrl", "authorizedFetch", "getSocketUrl", "fetch", "import('./adminAuth.js')", "import('./auth.js')"], "search-terms": ["api.js", "React frontend API utilities", "API URL resolution", "environment diagnostics", "backend health check", "metrics endpoints", "auth token management", "fetch wrapper", "event management", "questions and answers API"], "state": 2, "file_id": 16, "knowledge_revision": 195, "git_revision": "e0f79ac55348bfd2a64151e80f0f7a60e4c3dc74", "revision_history": [{"34": ""}, {"38": ""}, {"39": ""}, {"51": "198a76d44a20273b6763545856b2362df693e753"}, {"53": "198a76d44a20273b6763545856b2362df693e753"}, {"64": "3c58ee2e145c6f8306ae762acdcfc404ec66b759"}, {"72": "84af7ecffdd9018035239a3d1af921814778a6ec"}, {"80": "84af7ecffdd9018035239a3d1af921814778a6ec"}, {"81": "57433d69132310759764176ef1ba50f2bf24a9db"}, {"88": "56382c5bee40c89057f406794e80160126c37848"}, {"137": "895c78b50ba591c167bcf35633dd7bf4de46279f"}, {"148": "b539ee864de2e6182fba81a21a4509ca142724c3"}, {"153": "24aa6ade8da7ac2b8145450e00cf978e242c6809"}, {"157": "c4ec62b5d42dd787aa9933630f805a008ab055bb"}, {"165": "8822450f010f664c166f212dea80234bd863a5ad"}, {"173": "8822450f010f664c166f212dea80234bd863a5ad"}, {"182": "efcc1508abc2c98a28829857a1d02b4dce8a99f0"}, {"194": "e0f79ac55348bfd2a64151e80f0f7a60e4c3dc74"}, {"195": "e0f79ac55348bfd2a64151e80f0f7a60e4c3dc74"}], "ctags": [{"_type": "tag", "name": "DEV", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^        DEV: env.DEV,$/", "language": "JavaScript", "kind": "property", "scope": "debugEnvironment.diag", "scopeKind": "class"}, {"_type": "tag", "name": "MODE", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^        MODE: env.MODE,$/", "language": "JavaScript", "kind": "property", "scope": "debugEnvironment.diag", "scopeKind": "class"}, {"_type": "tag", "name": "PROD", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^        PROD: env.PROD,$/", "language": "JavaScript", "kind": "property", "scope": "debugEnvironment.diag", "scopeKind": "class"}, {"_type": "tag", "name": "VITE_API_BASE_URL", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^        VITE_API_BASE_URL: env.VITE_API_BASE_URL,$/", "language": "JavaScript", "kind": "property", "scope": "debugEnvironment.diag", "scopeKind": "class"}, {"_type": "tag", "name": "VITE_SOCKET_URL", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^        VITE_SOCKET_URL: env.VITE_SOCKET_URL,$/", "language": "JavaScript", "kind": "property", "scope": "debugEnvironment.diag", "scopeKind": "class"}, {"_type": "tag", "name": "authorizedFetch", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function authorizedFetch(url, options = {}) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {})"}, {"_type": "tag", "name": "baseResolved", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^        baseResolved: getApiBaseUrl(),$/", "language": "JavaScript", "kind": "property", "scope": "debugEnvironment.diag", "scopeKind": "class"}, {"_type": "tag", "name": "createEvent", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function createEvent(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "debugEnvironment", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export function debugEnvironment() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "defaultBase", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^const defaultBase = \"\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "defaultOrigin", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^const defaultOrigin =$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "diag", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^      const diag = {$/", "language": "JavaScript", "kind": "class", "scope": "debugEnvironment", "scopeKind": "class"}, {"_type": "tag", "name": "getActiveUsers", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getActiveUsers(window = \"10m\") {$/", "language": "JavaScript", "kind": "function", "signature": "(window = \"10m\")"}, {"_type": "tag", "name": "getApiBaseUrl", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export function getApiBaseUrl() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getEventHeatmap", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getEventHeatmap(range = \"7d\") {$/", "language": "JavaScript", "kind": "function", "signature": "(range = \"7d\")"}, {"_type": "tag", "name": "getEventTypeDistribution", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getEventTypeDistribution() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getEvents", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getEvents() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getQuestions", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getQuestions() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getRecentActivity", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getRecentActivity() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getSignupsPerDay", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getSignupsPerDay(range = \"\") {$/", "language": "JavaScript", "kind": "function", "signature": "(range = \"\")"}, {"_type": "tag", "name": "getSocketUrl", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export function getSocketUrl() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getTotalEvents", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getTotalEvents() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getUsersAnsweredToday", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function getUsersAnsweredToday() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "socketResolved", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^        socketResolved: getSocketUrl(),$/", "language": "JavaScript", "kind": "property", "scope": "debugEnvironment.diag", "scopeKind": "class"}, {"_type": "tag", "name": "submitAnswer", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function submitAnswer(payload) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload)"}, {"_type": "tag", "name": "testBackendConnection", "path": "/home/kavia/workspace/code-generation/real-time-analytics-dashboard-182952-182962/react_frontend/src/api.js", "pattern": "/^export async function testBackendConnection() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}], "hash": "9bf9346277c4e92c5a17a06882b49fe5", "format-version": 4, "code-base-name": "react_frontend", "filename": "react_frontend/src/api.js", "fields": [{"name": "DEV: env.DEV,", "scope": "debugEnvironment.diag", "scopeKind": "class", "description": "unavailable"}, {"name": "MODE: env.MODE,", "scope": "debugEnvironment.diag", "scopeKind": "class", "description": "unavailable"}, {"name": "PROD: env.PROD,", "scope": "debugEnvironment.diag", "scopeKind": "class", "description": "unavailable"}, {"name": "VITE_API_BASE_URL: env.VITE_API_BASE_URL,", "scope": "debugEnvironment.diag", "scopeKind": "class", "description": "unavailable"}, {"name": "VITE_SOCKET_URL: env.VITE_SOCKET_URL,", "scope": "debugEnvironment.diag", "scopeKind": "class", "description": "unavailable"}, {"name": "baseResolved: getApiBaseUrl(),", "scope": "debugEnvironment.diag", "scopeKind": "class", "description": "unavailable"}, {"name": "socketResolved: getSocketUrl(),", "scope": "debugEnvironment.diag", "scopeKind": "class", "description": "unavailable"}]}